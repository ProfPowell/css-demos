<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>05:Position</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="shared/shared.css">
</head>

<body>

  <style>
    .wrap { border:1px solid indianred; }
    .box { padding:10px; }
  </style>

  
  <h1>05 - Position</h1>

  <p>To position elements at an offset to their natural position in the document flow, we use the CSS properties:</p>
  <ul>
    <li><code>top</code></li>
    <li><code>bottom</code></li>
    <li><code>left</code></li>
    <li><code>right</code></li>
  </ul>

  <hr>

  <h2>position:static</h2>

  <p>
    By default, block elements have a position of <strong>static</strong>. This indicates it is in the natural flow of the document,
    and <strong>unavailable</strong> for positioning. This is important. The above position properties will not affect static elements.
    For example, listed below, you'll see the position key/value set inline to each box. However, the boxes haven't changed their position.
  </p>

  <div class="box" style="top:10px;">Box 1 - <code>top:10px;</code></div>
  <div class="box" style="left:20px;">Box 2 - <code>left:20px;</code></div>

  <p>Therefore, we must first designate the element as a position type, before it will change: <code>.box { position:xxxx; }</code></p>

  <hr>

  <h2>position:relative</h2>

  <p>
    When positioning, you are offsetting the element <strong>relative</strong> to its position within the document flow, not the whole document.
    This is why if you set <code>top:10px;</code>, it only moves vertically 10 pixels from its current location.
  </p>

  <div class="wrap">
    <div class="box" style="position:relative; top:-10px;">Box 1 - <code>position:relative; top:-10px;</code></div>
    <div class="box" style="position:relative; left:20px;">Box 2 - <code>position:relative; left:20px;</code></div>
    <div class="box" style="top:40px; left:20px;">Box 3 - <code>position:static; top:40px; left:20px;</code> - <strong>No Change!</strong></div>
  </div>

  <p>
    <strong>Note:</strong> Take a look at <code>Box 2</code>. Its width is too long for the containing box and part of it extends past the red-border boundary. 
    Its important to remember with the fixed-positioning values of <code>top, bottom, left, and right</code>, you are just offsetting the element. 
    You aren't actually changing its existing dimensions or its position in the document flow. As far as the document/device is conconcerned, the element still 
    occupies the position it did before you offset it. This further supported by looking at <code>Box 3</code>. It is spaced according to the original position of
    Box 2, not its offset position. 
  </p>

  <hr>

  <h2>position:absolute</h2>

  <p>
    Unlike relative positioning, when you position absolutely, you are offsetting the element <strong>absolute</strong> to its <em>nearest relatively-positioned ancestor</em>.
    If none is found, the top-left of the document is used (the top-left, or (0,0), of scroll-y position 0).
  </p>

  <p>Take the same example before, but set the first box to absolute positioning:</p>

  <div class="wrap">
    <div class="box" style="position:absolute; top:0; right:0;";>Box 1 - Oops - <code>position:absolute; top:0; right:0;</code></div>
    <div class="box" style="position:relative; left:20px;">Box 2 - <code>position:relative; left:20px;</code></div>
    <div class="box">Box 3</div>
  </div>

  <p>What happended to <em>Box 1</em>! Check the upper-right corner of your device and you should see the box.</p>

  <p>
    This absolutely-positioned element's nearest relative parent is the document itself, 
    so setting its position to top and right values of zero places at the top of the document (page)
  </p>

  <p>
    Also, note how Box 2's top position is now flush with the outer red-border wrapper. By absolutely-positioning Box 1, 
    <em>we have removed it from the natural document flow</em>. For onscreen rendering purposes, its as if Box 1 didn't
    exist inside the red-border wrapper.
  </p>

  <p>So how do we fix this?</p>

  <p>
    As we saw in the <code>position:relative</code> section, setting a block container to relative positioning uses its (0,0) point as the offset reference,
    not the document. This is adventageous in our example. By setting the red-border wrapper's position to relative, the absolutely-positioned Box 1 is now positioned 
    relative to its parent and not the document itself.
  </p>

  <div class="wrap" style="position:relative;">
    <div class="box" style="position:absolute; top:0; right:0; background:indianred;">Box 1 - Oops - <code>position:absolute; top:0; right:0;</code></div>
    <div class="box" style="position:relative; left:20px;">Box 2 - <code>position:relative; left:20px;</code></div>
    <div class="box">Box 3</div>
  </div>

  <p>
    Wait, where is it? Its not at the top of the page, but you don't see it in the the above wrapper either. 
    If you inspect the above code in Dev Tools, you'll see Box 1 is at the top-right of the wrapper, and not the document, as expected.
    This is because both Box 1 and Box 2 are competing for the same space <em>and</em> both have position set. This is an important distinction.
  </p>

  <p>If Box 2 was still position static, Box 1 would have visual priority, shown below:</p>

  <div class="wrap" style="position:relative;">
    <div class="box" style="position:absolute; top:0; right:0; background:indianred;">Box 1 - Oops - <code style="color:#fff;">position:absolute; top:0; right:0;</code></div>
    <div class="box" style="position:static; left:20px;">Box 2 - <code>position:static; left:20px;</code></div>
    <div class="box">Box 3</div>
  </div>

  <p>Box 2 has no position set, so Box 1 wins out.</p>

  <p>
    However, since Box 2 does have position set, the browser doesn't know which one gets priority, so it defaults to the last element in the document.
    In this case, Box 2 wins out.
  </p>

  <p>If we were to do nothing else, but put Box 1 after Box 2 in the code, it would render as expected:</p>
  
  <div class="wrap" style="position:relative;">
    <div class="box" style="position:relative; left:20px;">Box 2 - <code>position:relative; left:20px;</code></div>
    <div class="box" style="position:absolute; top:0; right:0; background:indianred;">Box 1 - <code style="color:#fff;">position:absolute; top:0; right:0;</code></div>
    <div class="box">Box 3</div>
  </div>

  <p>
    But you may not always be able to move markup around after it is built, or it might ruin other breakpoints, etc.
    Instead, you can tell the browser to give Box 1 priority, even though it doesn't deserve it with the <code>z-index</code> property, by giving it a higher value:
  </p>

  <div class="wrap" style="position:relative;">
    <div class="box" style="z-index:1; position:absolute; top:0; right:0; background:indianred;">Box 1 - <code style="color:#fff;">z-index:1; position:absolute; top:0; right:0;</code></div>
    <div class="box" style="position:relative; left:20px;">Box 2 - <code>position:relative; left:20px;</code></div>
    <div class="box">Box 3</div>
  </div>

  <p>
    If this seems like a lot to manage, it is. Imagine a whole document mis-managed with positioning, offsets and arbitrary z-index values.
    Instead, use positioning and z-index only when necessary to achieve a specific goal. In most cases, you can get away with margin and padding instead.
  </p>

  <hr>

  <h2>position:fixed</h2>

  <p>
    Similar to <code>position:absolute;</code>, fixed-position elements are removed from the document flow, however they are offset from the document, even if it has a relatively-positioned parent element.
    They also stay in the same screen location, even if the page is scrolled!
  </p>

  <p>Find this element on screen:</p>
  <div class="box" style="background:gold;">Fixed Position - <code>position:fixed; top:50px; right:0;</code></div>

  <p>It is not constrained here to its relative-positioned parent:</p>
  <div class="wrap" style="position:relative;">
    <div class="box" style="position:fixed; top:50px; right:0; background:gold;">Fixed Position - <code>position:fixed; top:50px; right:0;</code></div>
  </div>

  <p>Instead, it is fixed relative to the document itself.</p>

  <hr>

  <h2>position:sticky</h2>

  <p>
    There is a sort of in-between state between relative/absolute elements (don't stay on screen when scrolled),
    and fixed elements (do stay on screen when scrolled). With <em>sticky</em> positioning, 
    the element is treated as relative (in the normal document flow) until the page's scroll position reaches this elements location. 
    Then as the page further scrolls down, this sticky element behaves like a fixed-positioned element and stays on screen.
  </p>

  <p>This element sticks when reached:</p>
  <div style="position:relative; margin:0 0 20px; overflow:auto; height:240px; border:2px solid red;">
    <p class="spacer" style="min-height:80px;">Normal content above sticky element. Scroll this content area.</p>
    <div class="box" style="position:-webkit-sticky; position:sticky; top:0; color:#fff; background:purple;">Sticky Positioned - <code>position:-webkit-sticky; position:sticky; top:0;</code></div>
    <p>The sticky element must have a positioning property set, one of: <code>top, right, bottom, or left</code></p>
    <p>The parent element must also not have <code>overflow:hidden;</code> set;</p>
    <p class="spacer" style="min-height:600px;">Adding scroll depth for testing.</p class="spacer">
  </div>

  <p class="spacer" style="min-height:400px;">Adding scroll depth for testing.</p class="spacer">

</body>
</html>